## REST API에 대해 알아보자

### REST API란?
REST는 REpresentation State Transfer의 약자로 2000년에 Roy Fielding이란 사람이 논문에서 제안한 웹 아키텍처 스타일  
쉽게 말하면 서버의 자원(Resource)을 URI로 표현하고 HTTP 메서드로 그 자원에 대한 행위를 정의하는 방식  

### 왜 REST API가 필요했을까?
과거에는 각 회사마다 제멋대로 API 스펙을 정의했기때문  
REST API는 이러한 혼란을 줄이기 위해 **일관된 규칙**을 정의함

### REST의 핵심 원칙
+ 자원(resource) 중심 설계
    - URI는 자원을 나타낸다 (동사가 아닌 명사로)
    - 좋은 예 : /users, /users/123
    - 나쁜 예 : /getUser, /deletePost
+ HTTP 메서드로 행위 표현
    - GET : 조회
    - POST : 생성
    - PUT : 전체 수정
    - PATCH : 부분 수정
    - DELETE : 삭제
+ 무상태성
    - 서버는 클라이언트의 상태를 저장하지 않는다
    - 각 요청은 독립적이며 필요한 모든 정보를 포함해야 한다

### HTTP 메서드의 종류
+ GET
    ```
    GET /users/123
    ```
    - 조회
    - 서버의 자원을 읽기만 함
    - 데이터를 변경하지 않는다
    - 멱등성 O, 안전성 O
+ POST
    ```
    POST /users
    Body: { "name": "강선구", "email": "..." }
    ```
    - 생성
    - 새로운 자원을 생성
    - 같은 요청을 여러번 보내면 매번 새로운 자원이 생성된다
    - 멱등성 X, 안전성 X
+ PUT
    ```
    POST /users
    Body: { "name": "강선구", "email": "..." }
    ```
    - 전체 수정
    - 자원을 완전히 대체합니다
    - 모든 필드를 보내야 한다 (안보낸 필드는 null이나 기본값으로 설정)
    - 멱등성 O, 안전성 X
+ PATCH
    ```
    PATCH /users/123
    Body: { "email": "new@email.com" }
    ```
    - 자원의 일부만 수정
    - 보낸 필드만 업데이트
    - 멱등성 O, 안전성 X
+ DELETE
    ```
    DELETE /users/123
    ```
    - 자원을 삭제
    - 같은 요청을 여러번 보내도 결과는 동일 (왜냐면 첫번째 요청에서 삭제되었으므로)
    - 멱등성 O, 안전성 X

### 멱등성이란?
같은 요청을 여러번 보내도 같은 결과를 보장하는 성질  

+ 멱등성을 보장하는 메서드
    - GET : 조회만 하므로 몇번을 호출해도 같은 결과
    - PUT : 전체 교체이므로 같은 데이터를 여러번 보내도 동일한 결과
    - DELETE : 이미 삭제된 자원을 삭제해도 결과는 동일
    - PATCH : 보통은 멱등을 보장하지만 구현에 따라 다를 수 있다
        + {"age": 30} : 멱등
        + {"age": "+1"} : 멱등아님 (호출할때마다 증가하므로)

+ 멱등성을 보장하지 않는 메서드
    - POST : 호출할 때마다 새로운 자원을 생성


왜 멱등성이 중요한가?  
네트워크는 불안정할 수 있다 요청을 보냈는데, 응답이 오지않아 재시도하는 경우가 있을텐데  
이럴때 멱등성을 보장하는 메서드는 안전하게 재시도가 가능하지만  
멱등성을 보장하지 않는 메서드는 중복 생성 위험이 있으므로 별도의 처리가 필요하다!