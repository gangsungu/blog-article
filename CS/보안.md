## 보안

### 인증과 인가
+ 인증 (Authentication)
    - 사용자가 누구인지 확인하는 과정
+ 인가 (Authorization)
    - 사용자에게 자원에 접근할 수 있는 권한을 부여하는 것  

아이디와 암호를 입력하는 로그인은 인증의 한 형태  
사용자가 누구인지 확인하면 서버는 클라이언트에 문자열로 된 토큰을 제공하고 클라이언트는 각 요청마다 해당 토큰으로 자신을 증명한다  
그래서 매번 아이디와 비밀번호를 입력받지 않고 사용자를 식별할 수 있다  

이렇게 토큰을 사용해서 사용자를 식별하려면 매핑 정보를 저장해야 한다  
매핑 정보를 저장하는 곳은 크게 2가지가 있다

+ 서버의 별도 저장소
    - 서버의 DB나 레디스와 같은 외부 저장소
        + 로그인에 성공한 경우, 서버는 임의의 토큰 문자열을 생성한 후 매핑 정보를 저장
        + 토큰 문자열을 생성할 때는 고유한 값을 생성해서 토큰 중복이 일어나지 않도록 해야한다
    - 서버 메모리
        + 서블릿 세션
        + 톰캣과 같은 서블릿 컨테이너는 메모리에 세션 객체를 저장 (서블릿 세션은 고유의 ID를 생성)
        + 메모리에 세션 객체를 저장할 때는 고정 세션을 사용해야 한다
        + 단점
            - 서버를 재시작하면 메모리에 저장한 토큰 데이터가 사라짐
            - 생성할 수 있는 세션의 수가 메모리에 제한을 받음
+ 토큰
    - 대표적으로 JWT (JSON Web Token)
    - 장점
        + 토큰만 있으면 사용자가 누구인지 식별 가능
        + 별도의 외부DB에 토큰을 저장할 필요가 없으므로 서버 구조가 간단해진다
        + 메모리에 토큰을 저장하지 않으므로 서버를 수평으로 확장하기 쉬워진다
    - 단점
        + 네트워크 트래픽의 증가 (토큰 안에 데이터가 추가되므로)
        + 토큰을 서버에서 제어할 수 없다
            - 유효시간을 설정하여 해결
                + 토큰 생성 시간을 기준
                + 마지막 접근 시간을 기준

인증과 토큰은 사용자가 누구인지, 정상적으로 접근하는지 확인한다면  
인가는 사용자가 요청한 기능을 실행할 권한이 있는지 확인하는 역할을 한다  

+ RBAC (Role Based Access Control)
    - 역할 기반 접근 제어
    - 사용자에게 직접 권한을 주는게 아닌 역할을 통해 간접적으로 권한을 부여하는 방식

### 데이터 암호화