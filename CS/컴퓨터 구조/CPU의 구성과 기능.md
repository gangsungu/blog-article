## CPU의 구성과 기능

### 중앙 처리 장지 (CPU)
프로그램 명령을 해석하고 실행하는 역할, 사람의 두뇌에 해당  
아래 3가지 요소가 협력하여 명령어를 실행

+ 연산장치
    - 산술논리 연산 장치 (계산기)
    - 사칙연산과 논리연산을 담당
+ 제어장치
    - 명령어를 해독하는 기능, 제어 신호를 해당 장치에 전달하는 역할
    - CPU 내부와 다른 하드웨어 장치 간의 데이터 흐름 관리
+ 레지스터
    - CPU 내부의 가장 빠른 저장 공간
    - CPU가 즉시 사용해야 하는 데이터나 명령어를 임시로 저장한다
    - 프로그램 카운터 (Program Counter)
        + 다음에 실행할 명령어의 메모리 주소를 저장
        + CPU가 명령어를 하나 실행할 때마다 자동으로 증가

### 컨텍스트 스위칭과 레지스터
프로세스가 전환될 때, 다음 과정에서 오버헤드가 발생하므로  
불필요한 컨텍스트 스위칭을 줄이는 것이 중요하다

+ 현재 프로세스의 모든 레지스터 값을 메모리(PCB)에 저장
+ 새 프로세스의 레지스터 값을 복원
+ 실행 재개

### PCB (Process Control Block)
운영체제가 프로세스를 관리하기 위해 필요한 모든 정보를 담고 있는 자료구조  

쉽게 비유하면  
프로세스 = 실행 중인 프로그램 / PCB = 프로세스의 신분증  

PCB는 운영체제의 커널 메모리 영역에 저장되며 메모리 구조를 간략화하면 다음과 같다
```
[메모리 구조]

커널 영역 (Kernel Space)
├── PCB #1 (Chrome)
├── PCB #2 (IntelliJ)
├── PCB #3 (Spring Boot App)
└── ...
─────────────────────
사용자 영역 (User Space)
├── 프로세스 #1의 코드/데이터/스택
├── 프로세스 #2의 코드/데이터/스택
└── ...
```

프로세스 A에서 프로세스 B로 전환될 때, 컨텍스트 스위칭 과정을 보면
```
[1단계: 프로세스 A의 상태 저장]
CPU 레지스터 → PCB_A에 저장
├── RAX, RBX, RCX, RDX ...
├── PC (다음 실행할 명령어 주소)
├── SP (스택 포인터)
└── Flags (상태 플래그)

[2단계: 프로세스 B의 상태 복원]
PCB_B에서 → CPU 레지스터로 복원
├── RAX, RBX, RCX, RDX ...
├── PC 
├── SP
└── Flags

[3단계: 실행 재개]
프로세스 B가 멈췄던 지점부터 계속 실행
```